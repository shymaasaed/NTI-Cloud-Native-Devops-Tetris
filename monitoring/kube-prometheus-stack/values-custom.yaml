# ===============================
# Ultra-Light Config for Low Resources
# ===============================
global:
  storageClass: "standard"

grafana:
  enabled: true
  adminUser: admin
  adminPassword: admin123
  service:
    type: LoadBalancer
    nodePort: 32000
  persistence:
    enabled: false
  resources:
    requests:
      memory: 128Mi
      cpu: 50m
    limits:
      memory: 256Mi
      cpu: 200m
  smtp:
    enabled: true
    host: smtp.gmail.com:587
    user: mernathawy211@gmail.com
    password: "rzqh dcqp wcpy lvny"
    from_address: mernathawy211@gmail.com
    skip_verify: false
prometheus:
  enabled: true
  service:
    type: LoadBalancer
    nodePort: 30090
  prometheusSpec:
    serviceMonitorSelectorNilUsesHelmValues: false
    storageSpec:
      emptyDir: {}
    retention: 6h
    resources:
      requests:
        memory: 256Mi
        cpu: 100m
      limits:
        memory: 512Mi
        cpu: 300m
    additionalScrapeConfigs:
      - job_name: "jenkins-external"
        metrics_path: /prometheus
        scrape_interval: 30s
        static_configs:
          - targets:
              - 13.218.126.254:8080
    additionalPrometheusRules:
      - name: jenkins-alerts
        groups:
          - name: jenkins.rules
            rules:
              - alert: JenkinsBuildFailed
                expr: jenkins_runs_failure_total > 0
                for: 2m
                labels:
                  severity: critical
                annotations:
                  summary: "Jenkins Build Failed"
                  description: "Jenkins build failed."
      - name: test-alert
        groups:
          - name: test.rules
            rules:
              - alert: AlwaysFiring
                expr: vector(1)
                for: 10s
                labels:
                  severity: warning
                annotations:
                  summary: "ðŸ”¥ Test Alert"
                  description: "This alert always fires for testing."
nodeExporter:
  enabled: false

kubeStateMetrics:
  enabled: true


alertmanager:
  enabled: true
  alertmanagerSpec:
    configSecret: alertmanager-custom

